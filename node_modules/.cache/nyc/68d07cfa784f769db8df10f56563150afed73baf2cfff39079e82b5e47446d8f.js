var cov_1zuwd865in=function(){var path="/home/wasif/projects/file-clipper/src/Tiverse.js";var hash="9e59283a7ecd433efa4fba03e7721bdca1e1be3d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/wasif/projects/file-clipper/src/Tiverse.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:28}},"1":{start:{line:2,column:11},end:{line:2,column:24}},"2":{start:{line:3,column:12},end:{line:3,column:45}},"3":{start:{line:17,column:8},end:{line:17,column:32}},"4":{start:{line:18,column:8},end:{line:18,column:39}},"5":{start:{line:19,column:8},end:{line:19,column:35}},"6":{start:{line:20,column:8},end:{line:20,column:41}},"7":{start:{line:22,column:8},end:{line:22,column:25}},"8":{start:{line:23,column:8},end:{line:23,column:23}},"9":{start:{line:31,column:8},end:{line:31,column:58}},"10":{start:{line:32,column:22},end:{line:32,column:48}},"11":{start:{line:34,column:8},end:{line:38,column:9}},"12":{start:{line:35,column:12},end:{line:35,column:63}},"13":{start:{line:37,column:12},end:{line:37,column:38}},"14":{start:{line:40,column:8},end:{line:40,column:44}},"15":{start:{line:48,column:22},end:{line:48,column:51}},"16":{start:{line:49,column:8},end:{line:54,column:10}},"17":{start:{line:51,column:16},end:{line:51,column:50}},"18":{start:{line:52,column:16},end:{line:52,column:46}},"19":{start:{line:63,column:19},end:{line:63,column:21}},"20":{start:{line:64,column:8},end:{line:70,column:9}},"21":{start:{line:65,column:12},end:{line:69,column:13}},"22":{start:{line:66,column:16},end:{line:66,column:63}},"23":{start:{line:68,column:16},end:{line:68,column:35}},"24":{start:{line:72,column:8},end:{line:72,column:20}},"25":{start:{line:81,column:25},end:{line:81,column:42}},"26":{start:{line:82,column:8},end:{line:82,column:32}},"27":{start:{line:86,column:0},end:{line:86,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:22},end:{line:24,column:5}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:4},end:{line:30,column:5}},loc:{start:{line:30,column:18},end:{line:41,column:5}},line:30},"2":{name:"(anonymous_2)",decl:{start:{line:47,column:4},end:{line:47,column:5}},loc:{start:{line:47,column:20},end:{line:55,column:5}},line:47},"3":{name:"(anonymous_3)",decl:{start:{line:50,column:22},end:{line:50,column:23}},loc:{start:{line:50,column:32},end:{line:53,column:13}},line:50},"4":{name:"(anonymous_4)",decl:{start:{line:62,column:4},end:{line:62,column:5}},loc:{start:{line:62,column:23},end:{line:73,column:5}},line:62},"5":{name:"(anonymous_5)",decl:{start:{line:80,column:4},end:{line:80,column:5}},loc:{start:{line:80,column:32},end:{line:83,column:5}},line:80}},branchMap:{"0":{loc:{start:{line:34,column:8},end:{line:38,column:9}},type:"if",locations:[{start:{line:34,column:8},end:{line:38,column:9}},{start:{line:34,column:8},end:{line:38,column:9}}],line:34},"1":{loc:{start:{line:65,column:12},end:{line:69,column:13}},type:"if",locations:[{start:{line:65,column:12},end:{line:69,column:13}},{start:{line:65,column:12},end:{line:69,column:13}}],line:65}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"9e59283a7ecd433efa4fba03e7721bdca1e1be3d"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();const path=(cov_1zuwd865in.s[0]++,require('path'));const fs=(cov_1zuwd865in.s[1]++,require('fs'));const ecp=(cov_1zuwd865in.s[2]++,require('event-callback-promise'));/**
 *
 */class Tiverse{/**
     *
     * @param {*} link
     * @param {*} resolve
     * @param {*} reject
     */constructor(link){cov_1zuwd865in.f[0]++;cov_1zuwd865in.s[3]++;Object.assign(this,fs);cov_1zuwd865in.s[4]++;this.access=ecp(this.access);cov_1zuwd865in.s[5]++;this.stat=ecp(this.stat);cov_1zuwd865in.s[6]++;this.readdir=ecp(this.readdir);cov_1zuwd865in.s[7]++;this.link=link;cov_1zuwd865in.s[8]++;this.list=[];}/**
     *
     * @return {Promise<*>}
     */async start(){cov_1zuwd865in.f[1]++;cov_1zuwd865in.s[9]++;await this.access(this.link,this.constants.W_OK);const stats=(cov_1zuwd865in.s[10]++,await this.stat(this.link));cov_1zuwd865in.s[11]++;if(stats.isDirectory()){cov_1zuwd865in.b[0][0]++;cov_1zuwd865in.s[12]++;this.list=this.list.concat((await this.iterate()));}else{cov_1zuwd865in.b[0][1]++;cov_1zuwd865in.s[13]++;this.list.push(this.link);}cov_1zuwd865in.s[14]++;return await this.reduce(this.list);}/**
     *
     * @return {Promise<any[]>}
     */async iterate(){cov_1zuwd865in.f[2]++;const files=(cov_1zuwd865in.s[15]++,await this.readdir(this.link));cov_1zuwd865in.s[16]++;return Promise.all(files.map(file=>{cov_1zuwd865in.f[3]++;cov_1zuwd865in.s[17]++;file=path.join(this.link,file);cov_1zuwd865in.s[18]++;return Tiverse.getFiles(file);}));}/**
     *
     * @param data
     * @return {Promise<Array>}
     */async reduce(data){cov_1zuwd865in.f[4]++;let list=(cov_1zuwd865in.s[19]++,[]);cov_1zuwd865in.s[20]++;for(const i in data){cov_1zuwd865in.s[21]++;if(Array.isArray(data[i])){cov_1zuwd865in.b[1][0]++;cov_1zuwd865in.s[22]++;list=list.concat((await this.reduce(data[i])));}else{cov_1zuwd865in.b[1][1]++;cov_1zuwd865in.s[23]++;list.push(data[i]);}}cov_1zuwd865in.s[24]++;return list;}/**
     *
     * @param link
     * @return {Promise<*>}
     */static async getFiles(link){cov_1zuwd865in.f[5]++;const instance=(cov_1zuwd865in.s[25]++,new Tiverse(link));cov_1zuwd865in.s[26]++;return instance.start();}}cov_1zuwd865in.s[27]++;module.exports=Tiverse;